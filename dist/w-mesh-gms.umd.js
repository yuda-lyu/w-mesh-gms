/*!
 * w-mesh-gms v1.0.4
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("fs")):"function"==typeof define&&define.amd?define(["fs"],r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-mesh-gms"]=r(t.fs)}(this,(function(t){"use strict";var r=Array.isArray,e="object"==typeof global&&global&&global.Object===Object&&global,n="object"==typeof self&&self&&self.Object===Object&&self,o=e||n||Function("return this")(),u=o.Symbol,i=Object.prototype,a=i.hasOwnProperty,c=i.toString,f=u?u.toStringTag:void 0;var l=Object.prototype.toString;var s="[object Null]",v="[object Undefined]",p=u?u.toStringTag:void 0;function h(t){return null==t?void 0===t?v:s:p&&p in Object(t)?function(t){var r=a.call(t,f),e=t[f];try{t[f]=void 0;var n=!0}catch(t){}var o=c.call(t);return n&&(r?t[f]=e:delete t[f]),o}(t):function(t){return l.call(t)}(t)}function d(t){return null!=t&&"object"==typeof t}var y="[object Symbol]";function b(t){return"symbol"==typeof t||d(t)&&h(t)==y}var _=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function j(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!b(t))||(g.test(t)||!_.test(t)||null!=e&&t in Object(e))}function $(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}var m="[object AsyncFunction]",O="[object Function]",w="[object GeneratorFunction]",A="[object Proxy]";function x(t){if(!$(t))return!1;var r=h(t);return r==O||r==w||r==m||r==A}var z,S=o["__core-js_shared__"],k=(z=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var E=Function.prototype.toString;function P(t){if(null!=t){try{return E.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var F=/^\[object .+?Constructor\]$/,T=Function.prototype,M=Object.prototype,N=T.toString,R=M.hasOwnProperty,B=RegExp("^"+N.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I(t){return!(!$(t)||(r=t,k&&k in r))&&(x(t)?B:F).test(P(t));var r}function D(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return I(e)?e:void 0}var U=D(Object,"create");var C=Object.prototype.hasOwnProperty;var L=Object.prototype.hasOwnProperty;function V(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function q(t,r){return t===r||t!=t&&r!=r}function G(t,r){for(var e=t.length;e--;)if(q(t[e][0],r))return e;return-1}V.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},V.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},V.prototype.get=function(t){var r=this.__data__;if(U){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return C.call(r,t)?r[t]:void 0},V.prototype.has=function(t){var r=this.__data__;return U?void 0!==r[t]:L.call(r,t)},V.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=U&&void 0===r?"__lodash_hash_undefined__":r,this};var W=Array.prototype.splice;function H(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}H.prototype.clear=function(){this.__data__=[],this.size=0},H.prototype.delete=function(t){var r=this.__data__,e=G(r,t);return!(e<0)&&(e==r.length-1?r.pop():W.call(r,e,1),--this.size,!0)},H.prototype.get=function(t){var r=this.__data__,e=G(r,t);return e<0?void 0:r[e][1]},H.prototype.has=function(t){return G(this.__data__,t)>-1},H.prototype.set=function(t,r){var e=this.__data__,n=G(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};var J=D(o,"Map");function K(t,r){var e,n,o=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof r?"string":"hash"]:o.map}function Q(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Q.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(J||H),string:new V}},Q.prototype.delete=function(t){var r=K(this,t).delete(t);return this.size-=r?1:0,r},Q.prototype.get=function(t){return K(this,t).get(t)},Q.prototype.has=function(t){return K(this,t).has(t)},Q.prototype.set=function(t,r){var e=K(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};var X="Expected a function";function Y(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(X);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return e.cache=u.set(o,i)||u,i};return e.cache=new(Y.Cache||Q),e}Y.Cache=Q;var Z,tt,rt,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/\\(\\)?/g,ot=(Z=function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(et,(function(t,e,n,o){r.push(n?o.replace(nt,"$1"):e||t)})),r},tt=Y(Z,(function(t){return 500===rt.size&&rt.clear(),t})),rt=tt.cache,tt),ut=ot;function it(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}var at=1/0,ct=u?u.prototype:void 0,ft=ct?ct.toString:void 0;function lt(t){if("string"==typeof t)return t;if(r(t))return it(t,lt)+"";if(b(t))return ft?ft.call(t):"";var e=t+"";return"0"==e&&1/t==-at?"-0":e}function st(t){return null==t?"":lt(t)}function vt(t,e){return r(t)?t:j(t,e)?[t]:ut(st(t))}var pt=1/0;function ht(t){if("string"==typeof t||b(t))return t;var r=t+"";return"0"==r&&1/t==-pt?"-0":r}function dt(t,r){for(var e=0,n=(r=vt(r,t)).length;null!=t&&e<n;)t=t[ht(r[e++])];return e&&e==n?t:void 0}function yt(t,r,e){var n=null==t?void 0:dt(t,r);return void 0===n?e:n}function bt(t){var r=this.__data__=new H(t);this.size=r.size}bt.prototype.clear=function(){this.__data__=new H,this.size=0},bt.prototype.delete=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},bt.prototype.get=function(t){return this.__data__.get(t)},bt.prototype.has=function(t){return this.__data__.has(t)},bt.prototype.set=function(t,r){var e=this.__data__;if(e instanceof H){var n=e.__data__;if(!J||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Q(n)}return e.set(t,r),this.size=e.size,this};function _t(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new Q;++r<e;)this.add(t[r])}function gt(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function jt(t,r){return t.has(r)}_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},_t.prototype.has=function(t){return this.__data__.has(t)};var $t=1,mt=2;function Ot(t,r,e,n,o,u){var i=e&$t,a=t.length,c=r.length;if(a!=c&&!(i&&c>a))return!1;var f=u.get(t),l=u.get(r);if(f&&l)return f==r&&l==t;var s=-1,v=!0,p=e&mt?new _t:void 0;for(u.set(t,r),u.set(r,t);++s<a;){var h=t[s],d=r[s];if(n)var y=i?n(d,h,s,r,t,u):n(h,d,s,t,r,u);if(void 0!==y){if(y)continue;v=!1;break}if(p){if(!gt(r,(function(t,r){if(!jt(p,r)&&(h===t||o(h,t,e,n,u)))return p.push(r)}))){v=!1;break}}else if(h!==d&&!o(h,d,e,n,u)){v=!1;break}}return u.delete(t),u.delete(r),v}var wt=o.Uint8Array;function At(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e}function xt(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e}var zt=1,St=2,kt="[object Boolean]",Et="[object Date]",Pt="[object Error]",Ft="[object Map]",Tt="[object Number]",Mt="[object RegExp]",Nt="[object Set]",Rt="[object String]",Bt="[object Symbol]",It="[object ArrayBuffer]",Dt="[object DataView]",Ut=u?u.prototype:void 0,Ct=Ut?Ut.valueOf:void 0;var Lt=Object.prototype.propertyIsEnumerable,Vt=Object.getOwnPropertySymbols,qt=Vt?function(t){return null==t?[]:(t=Object(t),function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var i=t[e];r(i,e,t)&&(u[o++]=i)}return u}(Vt(t),(function(r){return Lt.call(t,r)})))}:function(){return[]},Gt=qt;function Wt(t){return d(t)&&"[object Arguments]"==h(t)}var Ht=Object.prototype,Jt=Ht.hasOwnProperty,Kt=Ht.propertyIsEnumerable,Qt=Wt(function(){return arguments}())?Wt:function(t){return d(t)&&Jt.call(t,"callee")&&!Kt.call(t,"callee")},Xt=Qt;var Yt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zt=Yt&&"object"==typeof module&&module&&!module.nodeType&&module,tr=Zt&&Zt.exports===Yt?o.Buffer:void 0,rr=(tr?tr.isBuffer:void 0)||function(){return!1},er=9007199254740991,nr=/^(?:0|[1-9]\d*)$/;function or(t,r){var e=typeof t;return!!(r=null==r?er:r)&&("number"==e||"symbol"!=e&&nr.test(t))&&t>-1&&t%1==0&&t<r}var ur=9007199254740991;function ir(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ur}var ar={};function cr(t){return function(r){return t(r)}}ar["[object Float32Array]"]=ar["[object Float64Array]"]=ar["[object Int8Array]"]=ar["[object Int16Array]"]=ar["[object Int32Array]"]=ar["[object Uint8Array]"]=ar["[object Uint8ClampedArray]"]=ar["[object Uint16Array]"]=ar["[object Uint32Array]"]=!0,ar["[object Arguments]"]=ar["[object Array]"]=ar["[object ArrayBuffer]"]=ar["[object Boolean]"]=ar["[object DataView]"]=ar["[object Date]"]=ar["[object Error]"]=ar["[object Function]"]=ar["[object Map]"]=ar["[object Number]"]=ar["[object Object]"]=ar["[object RegExp]"]=ar["[object Set]"]=ar["[object String]"]=ar["[object WeakMap]"]=!1;var fr="object"==typeof exports&&exports&&!exports.nodeType&&exports,lr=fr&&"object"==typeof module&&module&&!module.nodeType&&module,sr=lr&&lr.exports===fr&&e.process,vr=function(){try{var t=lr&&lr.require&&lr.require("util").types;return t||sr&&sr.binding&&sr.binding("util")}catch(t){}}(),pr=vr&&vr.isTypedArray,hr=pr?cr(pr):function(t){return d(t)&&ir(t.length)&&!!ar[h(t)]},dr=Object.prototype.hasOwnProperty;function yr(t,e){var n=r(t),o=!n&&Xt(t),u=!n&&!o&&rr(t),i=!n&&!o&&!u&&hr(t),a=n||o||u||i,c=a?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],f=c.length;for(var l in t)!e&&!dr.call(t,l)||a&&("length"==l||u&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||or(l,f))||c.push(l);return c}var br=Object.prototype;var _r=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),gr=_r,jr=Object.prototype.hasOwnProperty;function $r(t){if(e=(r=t)&&r.constructor,r!==("function"==typeof e&&e.prototype||br))return gr(t);var r,e,n=[];for(var o in Object(t))jr.call(t,o)&&"constructor"!=o&&n.push(o);return n}function mr(t){return null!=t&&ir(t.length)&&!x(t)}function Or(t){return mr(t)?yr(t):$r(t)}function wr(t){return function(t,e,n){var o=e(t);return r(t)?o:function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}(o,n(t))}(t,Or,Gt)}var Ar=1,xr=Object.prototype.hasOwnProperty;var zr=D(o,"DataView"),Sr=D(o,"Promise"),kr=D(o,"Set"),Er=D(o,"WeakMap"),Pr="[object Map]",Fr="[object Promise]",Tr="[object Set]",Mr="[object WeakMap]",Nr="[object DataView]",Rr=P(zr),Br=P(J),Ir=P(Sr),Dr=P(kr),Ur=P(Er),Cr=h;(zr&&Cr(new zr(new ArrayBuffer(1)))!=Nr||J&&Cr(new J)!=Pr||Sr&&Cr(Sr.resolve())!=Fr||kr&&Cr(new kr)!=Tr||Er&&Cr(new Er)!=Mr)&&(Cr=function(t){var r=h(t),e="[object Object]"==r?t.constructor:void 0,n=e?P(e):"";if(n)switch(n){case Rr:return Nr;case Br:return Pr;case Ir:return Fr;case Dr:return Tr;case Ur:return Mr}return r});var Lr=Cr,Vr=1,qr="[object Arguments]",Gr="[object Array]",Wr="[object Object]",Hr=Object.prototype.hasOwnProperty;function Jr(t,e,n,o,u,i){var a=r(t),c=r(e),f=a?Gr:Lr(t),l=c?Gr:Lr(e),s=(f=f==qr?Wr:f)==Wr,v=(l=l==qr?Wr:l)==Wr,p=f==l;if(p&&rr(t)){if(!rr(e))return!1;a=!0,s=!1}if(p&&!s)return i||(i=new bt),a||hr(t)?Ot(t,e,n,o,u,i):function(t,r,e,n,o,u,i){switch(e){case Dt:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case It:return!(t.byteLength!=r.byteLength||!u(new wt(t),new wt(r)));case kt:case Et:case Tt:return q(+t,+r);case Pt:return t.name==r.name&&t.message==r.message;case Mt:case Rt:return t==r+"";case Ft:var a=At;case Nt:var c=n&zt;if(a||(a=xt),t.size!=r.size&&!c)return!1;var f=i.get(t);if(f)return f==r;n|=St,i.set(t,r);var l=Ot(a(t),a(r),n,o,u,i);return i.delete(t),l;case Bt:if(Ct)return Ct.call(t)==Ct.call(r)}return!1}(t,e,f,n,o,u,i);if(!(n&Vr)){var h=s&&Hr.call(t,"__wrapped__"),d=v&&Hr.call(e,"__wrapped__");if(h||d){var y=h?t.value():t,b=d?e.value():e;return i||(i=new bt),u(y,b,n,o,i)}}return!!p&&(i||(i=new bt),function(t,r,e,n,o,u){var i=e&Ar,a=wr(t),c=a.length;if(c!=wr(r).length&&!i)return!1;for(var f=c;f--;){var l=a[f];if(!(i?l in r:xr.call(r,l)))return!1}var s=u.get(t),v=u.get(r);if(s&&v)return s==r&&v==t;var p=!0;u.set(t,r),u.set(r,t);for(var h=i;++f<c;){var d=t[l=a[f]],y=r[l];if(n)var b=i?n(y,d,l,r,t,u):n(d,y,l,t,r,u);if(!(void 0===b?d===y||o(d,y,e,n,u):b)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var _=t.constructor,g=r.constructor;_==g||!("constructor"in t)||!("constructor"in r)||"function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g||(p=!1)}return u.delete(t),u.delete(r),p}(t,e,n,o,u,i))}function Kr(t,r,e,n,o){return t===r||(null==t||null==r||!d(t)&&!d(r)?t!=t&&r!=r:Jr(t,r,e,n,Kr,o))}var Qr=1,Xr=2;function Yr(t){return t==t&&!$(t)}function Zr(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}}function te(t){var r=function(t){for(var r=Or(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,Yr(o)]}return r}(t);return 1==r.length&&r[0][2]?Zr(r[0][0],r[0][1]):function(e){return e===t||function(t,r,e,n){var o=e.length,u=o,i=!n;if(null==t)return!u;for(t=Object(t);o--;){var a=e[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var c=(a=e[o])[0],f=t[c],l=a[1];if(i&&a[2]){if(void 0===f&&!(c in t))return!1}else{var s=new bt;if(n)var v=n(f,l,c,t,r,s);if(!(void 0===v?Kr(l,f,Qr|Xr,n,s):v))return!1}}return!0}(e,t,r)}}function re(t,r){return null!=t&&r in Object(t)}function ee(t,e){return null!=t&&function(t,e,n){for(var o=-1,u=(e=vt(e,t)).length,i=!1;++o<u;){var a=ht(e[o]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++o!=u?i:!!(u=null==t?0:t.length)&&ir(u)&&or(a,u)&&(r(t)||Xt(t))}(t,e,re)}var ne=1,oe=2;function ue(t){return t}function ie(t){return j(t)?(r=ht(t),function(t){return null==t?void 0:t[r]}):function(t){return function(r){return dt(r,t)}}(t);var r}function ae(t){return"function"==typeof t?t:null==t?ue:"object"==typeof t?r(t)?(e=t[0],n=t[1],j(e)&&Yr(n)?Zr(ht(e),n):function(t){var r=yt(t,e);return void 0===r&&r===n?ee(t,e):Kr(n,r,ne|oe)}):te(t):ie(t);var e,n}var ce,fe=function(t,r,e){for(var n=-1,o=Object(t),u=e(t),i=u.length;i--;){var a=u[ce?i:++n];if(!1===r(o[a],a,o))break}return t};var le=function(t,r){return function(e,n){if(null==e)return e;if(!mr(e))return t(e,n);for(var o=e.length,u=r?o:-1,i=Object(e);(r?u--:++u<o)&&!1!==n(i[u],u,i););return e}}((function(t,r){return t&&fe(t,r,Or)})),se=le;function ve(t,r){var e=-1,n=mr(t)?Array(t.length):[];return se(t,(function(t,o,u){n[++e]=r(t,o,u)})),n}function pe(t,e){return(r(t)?it:ve)(t,ae(e))}function he(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t}function de(t,e){var n;return(r(t)?he:se)(t,"function"==typeof(n=e)?n:ue)}function ye(t,r,e){var n=-1,o=t.length;r<0&&(r=-r>o?0:o+r),(e=e>o?o:e)<0&&(e+=o),o=r>e?0:e-r>>>0,r>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+r];return u}var be=/\s/;var _e=/^\s+/;function ge(t){return t?t.slice(0,function(t){for(var r=t.length;r--&&be.test(t.charAt(r)););return r}(t)+1).replace(_e,""):t}var je=NaN,$e=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,Oe=/^0o[0-7]+$/i,we=parseInt;function Ae(t){if("number"==typeof t)return t;if(b(t))return je;if($(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=$(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=ge(t);var e=me.test(t);return e||Oe.test(t)?we(t.slice(2),e?2:8):$e.test(t)?je:+t}var xe=1/0,ze=17976931348623157e292;function Se(t){return t?(t=Ae(t))===xe||t===-xe?(t<0?-1:1)*ze:t==t?t:0:0===t?t:0}function ke(t){var r=Se(t),e=r%1;return r==r?e?r-e:r:0}function Ee(t,r,e){var n=null==t?0:t.length;return n?ye(t,(r=e||void 0===r?1:ke(r))<0?0:r,n):[]}function Pe(t,r,e){var n=t.length;return e=void 0===e?n:e,!r&&e>=n?t:ye(t,r,e)}var Fe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Te(t){return Fe.test(t)}var Me=vr&&vr.isRegExp,Ne=Me?cr(Me):function(t){return d(t)&&"[object RegExp]"==h(t)};var Re="\\ud800-\\udfff",Be="["+Re+"]",Ie="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",De="\\ud83c[\\udffb-\\udfff]",Ue="[^"+Re+"]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="(?:"+Ie+"|"+De+")"+"?",qe="[\\ufe0e\\ufe0f]?",Ge=qe+Ve+("(?:\\u200d(?:"+[Ue,Ce,Le].join("|")+")"+qe+Ve+")*"),We="(?:"+[Ue+Ie+"?",Ie,Ce,Le,Be].join("|")+")",He=RegExp(De+"(?="+De+")|"+We+Ge,"g");function Je(t){return Te(t)?function(t){return t.match(He)||[]}(t):function(t){return t.split("")}(t)}var Ke=4294967295;function Qe(t,r,e){return e&&"number"!=typeof e&&function(t,r,e){if(!$(e))return!1;var n=typeof r;return!!("number"==n?mr(e)&&or(r,e.length):"string"==n&&r in e)&&q(e[r],t)}(t,r,e)&&(r=e=void 0),(e=void 0===e?Ke:e>>>0)?(t=st(t))&&("string"==typeof r||null!=r&&!Ne(r))&&!(r=lt(r))&&Te(t)?Pe(Je(t),0,e):t.split(r,e):[]}function Xe(t){return null==t?[]:function(t,r){return it(r,(function(r){return t[r]}))}(t,Or(t))}function Ye(t,r,e){for(var n=-1,o=t.length;++n<o;){var u=t[n],i=r(u);if(null!=i&&(void 0===a?i==i&&!b(i):e(i,a)))var a=i,c=u}return c}function Ze(t,r){return t<r}function tn(t){return t&&t.length?Ye(t,ue,Ze):void 0}function rn(t,r){return t>r}function en(t){return t&&t.length?Ye(t,ue,rn):void 0}function nn(t){return t!=t}function on(t,r,e){return r==r?function(t,r,e){for(var n=e-1,o=t.length;++n<o;)if(t[n]===r)return n;return-1}(t,r,e):function(t,r,e,n){for(var o=t.length,u=e+(n?1:-1);n?u--:++u<o;)if(r(t[u],u,t))return u;return-1}(t,nn,e)}function un(t,r,e){if((t=st(t))&&(e||void 0===r))return ge(t);if(!t||!(r=lt(r)))return t;var n=Je(t),o=Je(r),u=function(t,r){for(var e=-1,n=t.length;++e<n&&on(r,t[e],0)>-1;);return e}(n,o),i=function(t,r){for(var e=t.length;e--&&on(r,t[e],0)>-1;);return e}(n,o)+1;return Pe(n,u,i).join("")}function an(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}function cn(t,r){if(!an(t))return[];if(!an(r))return[];let e=function(t,r){return an(t)&&an(r)?t.split(r):[]}(t,r);e=pe(e,un);let n=[];return de(e,(function(t){an(t)&&n.push(t)})),n}var fn=o.isFinite,ln=Math.min;var sn=function(t){var r=Math[t];return function(t,e){if(t=Ae(t),(e=null==e?0:ln(ke(e),292))&&fn(t)){var n=(st(t)+"e").split("e");return+((n=(st(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round"),vn=sn;function pn(t){let r=!1;if(an(t))r=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;r=!0}return r}function hn(t){if(!pn(t))return 0;return Se(t)}function dn(t){if(!pn(t))return 0;t=hn(t);let r=vn(t);return"0"===String(r)?0:r}function yn(r,e){let n=cn(t.readFileSync(r,"utf8"),"\n");n=Ee(n,1);let o=pe(n,(t=>Qe(t,","))),u={};return de(o,(t=>{let r=dn(yt(t,1,0)),n=dn(yt(t,2,0)),o=dn(yt(t,3,0)),i=dn(yt(t,4,0)),a=hn(yt(t,5,0)),c=dn(yt(t,6,0));u[r]={id:r,i:o,j:i,k:n,[e]:a,active:c}})),u}return{readGms:async function(r,e,n,o){let u=function(r){let e=cn(t.readFileSync(r,"utf8"),"\n");e=Ee(e,1);let n=yt(pe(e,(t=>Qe(t,","))),0,[]);return{blx:hn(yt(n,0,0)),bly:hn(yt(n,1,0)),z:hn(yt(n,2,0)),sx:hn(yt(n,3,0)),sy:hn(yt(n,4,0)),sz:hn(yt(n,5,0))}}(r),i=yn(e,"top"),a=yn(n,"bot"),c=function(r){let e=cn(t.readFileSync(r,"utf8"),"\n");e=Ee(e,1);let n=pe(e,(t=>Qe(t,","))),o={};return de(n,(t=>{let r=dn(yt(t,1,0)),e=dn(yt(t,2,0)),n=dn(yt(t,3,0)),u=dn(yt(t,4,0)),i=dn(yt(t,5,0));o[r]={id:r,i:n,j:u,k:e,mat:i}})),o}(o),f={};de(c,((t,r)=>{let e=yt(i,`${r}.top`,0),n=yt(a,`${r}.bot`,0),o=yt(a,`${r}.active`,0),u=`${t.i}-${t.j}-${t.k}`;f[u]={id:t.id,i:t.i,j:t.j,k:t.k,top:e,bot:n,mat:t.mat,active:o}}));let l=Xe(f),s=pe(l,"i"),v=tn(s),p=en(s),h=pe(l,"j"),d=tn(h),y=en(h),b=pe(l,"k"),_=tn(b),g=en(b),j=[],$={};{let t=0;for(let r=g;r>=_;r--)for(let e=v;e<=p;e++)for(let n=d;n<=y;n++){let o=g-r+1,i=`${e}-${n}-${o}`,a=yt(f,`${e}-${n}-${r}`,{}),c=u.blx+(e+.5)*u.sx,l=u.bly+(n+.5)*u.sy,s=yt(a,"bot",0),v=yt(a,"mat",0),p=yt(a,"active",0);t++;let h={indn:t,key:i,x:c,y:l,z:s,mat:v,active:p};if(j.push(h),$[i]=h,r===_){i=`${e}-${n}-${o+1}`,s=yt(a,"top",0),t++;let r={indn:t,key:i,x:c,y:l,z:s,mat:v,active:p};j.push(r),$[i]=r}}}let m=[];{let t=0;for(let r=g;r>=_;r--)for(let e=v;e<=p-1;e++)for(let n=d;n<=y-1;n++){let o=g-r+1,u=`${e}-${n}-${o}`,i=`${e+1}-${n}-${o}`,a=`${e+1}-${n+1}-${o}`,c=`${e}-${n+1}-${o}`,f=`${e}-${n}-${o+1}`,l=`${e+1}-${n}-${o+1}`,s=`${e+1}-${n+1}-${o+1}`,v=`${e}-${n+1}-${o+1}`;if(8!==yt($,`${u}.active`,0)+yt($,`${i}.active`,0)+yt($,`${a}.active`,0)+yt($,`${c}.active`,0)+yt($,`${f}.active`,0)+yt($,`${l}.active`,0)+yt($,`${s}.active`,0)+yt($,`${v}.active`,0))continue;t++;let p={inde:t,nodes:[yt($,`${u}.indn`,0),yt($,`${i}.indn`,0),yt($,`${a}.indn`,0),yt($,`${c}.indn`,0),yt($,`${f}.indn`,0),yt($,`${l}.indn`,0),yt($,`${s}.indn`,0),yt($,`${v}.indn`,0)],mat:yt($,`${u}.mat`,0)};m.push(p)}}return{nodes:j,eles:m}},writeGms:async function(t,r,e){return console.log("尚待開發"),null}}}));
//# sourceMappingURL=w-mesh-gms.umd.js.map
